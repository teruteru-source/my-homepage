<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>説明付き表切り替え</title>
  <link href="https://unpkg.com/tabulator-tables@5.6.0/dist/css/tabulator.min.css" rel="stylesheet">
</head>
<body>
  <h1>データ一覧</h1>

  <select id="selector">
    <option value="table1">表1</option>
    <option value="table2">表2</option>
  </select>

  <p id="description"></p>

  <div id="table"></div>

  <script src="https://unpkg.com/tabulator-tables@5.6.0/dist/js/tabulator.min.js"></script>
  <script>
    const tableConfig = {
      table1: {
        file: "N11.json",
        description: `
          これは表1の説明です。<br>
          ○○に関するデータをまとめています。
        `
      },
      table2: {
        file: "N17.json",
        description: `
          こちらは表2です。<br>
          △△に関するデータです。
        `
      }
    };

    let table;

    function switchTable(key) {
      const config = tableConfig[key];
      document.getElementById("description").innerHTML = config.description;
      fetch(config.file)
        .then(r => r.json())
        .then(data => table.setData(data));
    }

    document.addEventListener("DOMContentLoaded", () => {
      table = new Tabulator("#table", {
        layout: "fitColumns",
        height: "600px",
        pagination: "local",
        paginationSize: 50,
        columns: [
          {title:"ID", field:"id", sorter:"number"},
          {title:"名前", field:"name"},
          {title:"値", field:"value", sorter:"number"}
        ],
      });

      switchTable("table1");

      document.getElementById("selector").addEventListener("change", e => {
        switchTable(e.target.value);
      });
    });
  </script>
</body>
</html>
